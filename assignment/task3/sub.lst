     1                                 %line 1+1 sub.asm
     2                                  SYS_EXIT equ 1
     3                                  SYS_READ equ 3
     4                                  SYS_WRITE equ 4
     5                                  STDIN equ 0
     6                                  STDOUT equ 1
     7                                 
     8                                 [segment .data]
     9 00000000 506C6561736520696E-     msg db "Please input the first number: "
    10 00000000 707574207468652066-
    11 00000000 69727374206E756D62-
    12 00000000 65723A20           
    13                                  len equ $- msg
    14 0000001F 0A                      endl: db "",0x0a
    15 00000020 00                      num db 0
    16 00000021 0A                      ten db 10
    17                                 
    18                                 [segment .bss]
    19                                 
    20 00000000 <gap>                   number1 resw 2
    21 00000004 <gap>                   number2 resw 2
    22 00000008 <gap>                   num1ten resw 1
    23 0000000A <gap>                   num1one resw 1
    24 0000000C <gap>                   num2ten resw 1
    25 0000000E <gap>                   num2one resw 1
    26 00000010 <gap>                   result resw 1
    27 00000012 <gap>                   result1 resw 1
    28                                 
    29                                 [segment .text]
    30                                 
    31 00000000 506C6561736520696E-     msg2 db "Please input the second number: "
    32 00000000 707574207468652073-
    33 00000000 65636F6E64206E756D-
    34 00000000 6265723A20         
    35                                  len2 equ $- msg2
    36                                 
    37                                  len3 equ $- msg3
    38                                 
    39                                 [global _start]
    40                                 
    41                                  _start:
    42                                 
    43 00000020 B804000000              mov eax, SYS_WRITE
    44 00000025 BB01000000              mov ebx, STDOUT
    45 0000002A B9[00000000]            mov ecx, msg
    46 0000002F BA1F000000              mov edx, len
    47 00000034 CD80                    int 0x80
    48                                 
    49 00000036 B803000000              mov eax, SYS_READ
    50 0000003B BB00000000              mov ebx, STDIN
    51 00000040 B9[00000000]            mov ecx, number1
    52 00000045 BA03000000              mov edx, 3
    53 0000004A CD80                    int 0x80
    54                                 
    55                                 
    56 0000004C B804000000              mov eax, SYS_WRITE
    57 00000051 BB01000000              mov ebx, STDOUT
    58 00000056 B9[00000000]            mov ecx, msg2
    59 0000005B BA20000000              mov edx, len2
    60 00000060 CD80                    int 0x80
    61                                 
    62 00000062 B803000000              mov eax, SYS_READ
    63 00000067 BB00000000              mov ebx, STDIN
    64 0000006C B9[00000000]            mov ecx, number2
    65 00000071 BA03000000              mov edx, 3
    66 00000076 CD80                    int 0x80
    67                                 
    68 00000078 B804000000              mov eax, SYS_WRITE
    69 0000007D BB01000000              mov ebx, STDOUT
    70 00000082 B9[00000000]            mov ecx, msg3
    71 00000087 BA00000000              mov edx, len3
    72 0000008C CD80                    int 0x80
    73                                 
    74                                 
    75 0000008E 48C7C000000000          mov rax, 0
    76 00000095 668B0425[00000000]      mov ax, [number1]
    77                                 
    78 0000009D 48C7C300000000          mov rbx, 0
    79 000000A4 668B1C25[00000000]      mov bx, [number2]
    80                                 
    81                                 
    82                                 
    83 000000AC 66C1E808                shr ax, 8
    84 000000B0 6683E830                sub ax, '0'
    85 000000B4 66890425[00000000]      mov [num1one], ax
    86 000000BC 48C7C000000000          mov rax, 0
    87 000000C3 668B0425[00000000]      mov ax, [number1]
    88 000000CB 66B9FF00                mov cx, 0x00FF
    89 000000CF 6621C8                  and ax, cx
    90 000000D2 6683E830                sub ax, '0'
    91 000000D6 66890425[00000000]      mov [num1ten], ax
    92                                 
    93                                 
    94 000000DE 66C1EB08                shr bx, 8
    95 000000E2 6683EB30                sub bx, '0'
    96 000000E6 66891C25[00000000]      mov [num2one], bx
    97 000000EE 48C7C300000000          mov rbx, 0
    98 000000F5 668B1C25[00000000]      mov bx, [number2]
    99 000000FD 66B9FF00                mov cx, 0x00FF
   100 00000101 6621CB                  and bx, cx
   101 00000104 6683EB30                sub bx, '0'
   102 00000108 66891C25[00000000]      mov [num2ten], bx
   103                                 
   104                                 
   105                                 
   106                                 
   107                                 
   108                                 
   109 00000110 49C7C200000000          mov r10, 0
   110 00000117 448A1425[00000000]      mov r10b, [num1ten]
   111 0000011F 49C7C300000000          mov r11, 0
   112 00000126 448A1C25[00000000]      mov r11b, [num1one]
   113 0000012E 49C7C400000000          mov r12, 0
   114 00000135 448A2425[00000000]      mov r12b, [num2ten]
   115 0000013D 49C7C500000000          mov r13, 0
   116 00000144 448A2C25[00000000]      mov r13b, [num2one]
   117                                 
   118 0000014C 66440FAF1425[000000-     imul r10w, [ten]
   119 0000014C 00]                
   120 00000156 66440FAF2425[000000-     imul r12w, [ten]
   121 00000156 00]                
   122                                 
   123 00000160 4500DA                  add r10b, r11b
   124 00000163 4500EC                  add r12b, r13b
   125                                 
   126 00000166 4528E2                  sub r10b, r12b
   127                                 
   128                                 
   129 00000169 48C7C000000000          mov rax, 0
   130 00000170 664489D0                mov ax, r10w
   131 00000174 48C7C200000000          mov rdx, 0
   132 0000017B 66B90A00                mov cx, 10
   133 0000017F 66F7F9                  idiv cx
   134                                 
   135                                 
   136                                 
   137 00000182 6683C030                add ax, '0'
   138 00000186 6683C230                add dx, '0'
   139                                 
   140                                 
   141 0000018A 66890425[00000000]      mov [result], ax
   142 00000192 66891425[00000000]      mov [result1], dx
   143                                 
   144                                 
   145 0000019A B804000000              mov eax, SYS_WRITE
   146 0000019F BB01000000              mov ebx, STDOUT
   147 000001A4 B9[00000000]            mov ecx, result
   148 000001A9 BA01000000              mov edx, 1
   149 000001AE CD80                    int 0x80
   150                                 
   151                                 
   152                                 
   153 000001B0 B804000000              mov eax, SYS_WRITE
   154 000001B5 BB01000000              mov ebx, STDOUT
   155 000001BA B9[00000000]            mov ecx, result1
   156 000001BF BA01000000              mov edx, 1
   157 000001C4 CD80                    int 0x80
   158                                 
   159 000001C6 B801000000              mov eax,1
   160 000001CB BF01000000              mov edi,1
   161 000001D0 BA01000000              mov edx, 1
   162 000001D5 488D3425[00000000]      lea rsi,[endl]
   163 000001DD 0F05                    syscall
   164                                 
   165                                 
   166                                 exit:
   167 000001DF B801000000              mov eax, SYS_EXIT
   168 000001E4 31DB                    xor ebx, ebx
   169 000001E6 CD80                    int 0x80
